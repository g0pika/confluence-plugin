"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var react_1 = tslib_1.__importStar(require("react"));
var Field_1 = tslib_1.__importDefault(require("./Field"));
var CheckboxField = function (props) {
    var children = props.children, _a = props.defaultIsChecked, defaultIsChecked = _a === void 0 ? false : _a, value = props.value, rest = tslib_1.__rest(props, ["children", "defaultIsChecked", "value"]);
    // Maintains a memoised list of the default values
    var defaultValue = react_1.useCallback(function (currentValue) {
        if (currentValue === void 0) { currentValue = []; }
        return defaultIsChecked && value !== undefined
            ? tslib_1.__spread(currentValue, [value]) : currentValue;
    }, [value, defaultIsChecked]);
    return value !== undefined ? (react_1.default.createElement(Field_1.default, tslib_1.__assign({}, rest, { defaultValue: defaultValue, transform: function (event, currentValue) {
            return event.currentTarget.checked && currentValue
                ? tslib_1.__spread(currentValue, [value]) : currentValue.filter(function (v) { return v !== value; });
        } }), function (_a) {
        var _b = _a.fieldProps, fieldValue = _b.value, otherFieldProps = tslib_1.__rest(_b, ["value"]), others = tslib_1.__rest(_a, ["fieldProps"]);
        return children(tslib_1.__assign({ fieldProps: tslib_1.__assign(tslib_1.__assign({}, otherFieldProps), { isChecked: !!fieldValue.find(function (v) { return v === value; }), value: value }) }, others));
    })) : (react_1.default.createElement(Field_1.default, tslib_1.__assign({}, rest, { defaultValue: defaultIsChecked, transform: function (event) { return event.currentTarget.checked; } }), function (_a) {
        var _b = _a.fieldProps, fieldValue = _b.value, otherFieldProps = tslib_1.__rest(_b, ["value"]), others = tslib_1.__rest(_a, ["fieldProps"]);
        return children(tslib_1.__assign({ fieldProps: tslib_1.__assign(tslib_1.__assign({}, otherFieldProps), { isChecked: fieldValue, value: value }) }, others));
    }));
};
CheckboxField.defaultProps = {
    defaultIsChecked: false,
};
exports.default = CheckboxField;
//# sourceMappingURL=CheckboxField.js.map