{"code":"(window.atlassianWebpackJsonp443cd0279e0da119d0d4637a8a554bda=window.atlassianWebpackJsonp443cd0279e0da119d0d4637a8a554bda||[]).push([[3],{658:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a=r(n(0)),o=r(n(39));function r(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var s=function(e){return a.default.createElement(o.default,i({dangerouslySetGlyph:'<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" focusable=\"false\" role=\"presentation\"><g fill-rule=\"evenodd\"><circle fill=\"currentColor\" cx=\"12\" cy=\"12\" r=\"10\"/><path d=\"M9.707 11.293a1 1 0 1 0-1.414 1.414l2 2a1 1 0 0 0 1.414 0l4-4a1 1 0 1 0-1.414-1.414L11 12.586l-1.293-1.293z\" fill=\"inherit\"/></g></svg>'},e))};s.displayName=\"CheckCircleIcon\";var l=s;t.default=l},659:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=n(2),o=a.__importStar(n(0)),r=a.__importDefault(n(5)),i=a.__importDefault(n(110)),s=n(1),l=n(661),c=function(e){var t=e.size;return t?\"height: \"+l.sizes[t]+\"; width: \"+l.sizes[t]+\";\":null};t.IconWrapper=r.default.span(u||(u=a.__makeTemplateObject([\"\\n  \",\" color: \",\";\\n  display: inline-block;\\n  fill: \",\";\\n  flex-shrink: 0;\\n  line-height: 1;\\n\\n  > svg {\\n    \",\" max-height: 100%;\\n    max-width: 100%;\\n    overflow: hidden;\\n    pointer-events: none;\\n    vertical-align: bottom;\\n  }\\n  /* Stop-color doesn't properly apply in chrome when the inherited/current color changes.\\n   * We have to initially set stop-color to inherit (either via DOM attribute or an initial CSS\\n   * rule) and then override it with currentColor for the color changes to be picked up.\\n   */\\n  stop {\\n    stop-color: currentColor;\\n  }\\n\"],[\"\\n  \",\" color: \",\";\\n  display: inline-block;\\n  fill: \",\";\\n  flex-shrink: 0;\\n  line-height: 1;\\n\\n  > svg {\\n    \",\" max-height: 100%;\\n    max-width: 100%;\\n    overflow: hidden;\\n    pointer-events: none;\\n    vertical-align: bottom;\\n  }\\n  /* Stop-color doesn't properly apply in chrome when the inherited/current color changes.\\n   * We have to initially set stop-color to inherit (either via DOM attribute or an initial CSS\\n   * rule) and then override it with currentColor for the color changes to be picked up.\\n   */\\n  stop {\\n    stop-color: currentColor;\\n  }\\n\"])),c,(function(e){return e.primaryColor||\"currentColor\"}),(function(e){return e.secondaryColor||s.background}),c);var u,p=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(n,e),n.insertDynamicGradientID=function(e){var t=i.default();return e.replace(/id=\"([^\"]+)-idPlaceholder\"/g,\"id=$1-\"+t).replace(/fill=\"url\\(#([^\"]+)-idPlaceholder\\)\"/g,'fill=\"url(#$1-'+t+')\"')},n.prototype.render=function(){var e=this.props,a=e.glyph,r=e.dangerouslySetGlyph,i=e.primaryColor,s=e.secondaryColor,l=e.size;return r?o.default.createElement(t.IconWrapper,{primaryColor:i,secondaryColor:s,size:l,\"aria-label\":this.props.label,dangerouslySetInnerHTML:{__html:n.insertDynamicGradientID(r)}}):o.default.createElement(t.IconWrapper,{primaryColor:i,secondaryColor:s,size:l,\"aria-label\":this.props.label},a?o.default.createElement(a,{role:\"presentation\"}):null)},n}(o.Component);t.default=p},660:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a=r(n(0)),o=r(n(659));function r(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var s=function(e){return a.default.createElement(o.default,i({dangerouslySetGlyph:'<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" focusable=\"false\" role=\"presentation\"><g fill-rule=\"evenodd\"><rect fill=\"currentColor\" x=\"6\" y=\"6\" width=\"12\" height=\"12\" rx=\"2\"/><rect fill=\"inherit\" x=\"8\" y=\"11\" width=\"8\" height=\"2\" rx=\"1\"/></g></svg>'},e))};s.displayName=\"CheckboxIndeterminateIcon\";var l=s;t.default=l},661:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.sizes={small:\"16px\",medium:\"24px\",large:\"32px\",xlarge:\"48px\"},t.sizeMap={small:\"small\",medium:\"medium\",large:\"large\",xlarge:\"xlarge\"}},662:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a=r(n(0)),o=r(n(659));function r(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var s=function(e){return a.default.createElement(o.default,i({dangerouslySetGlyph:'<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" focusable=\"false\" role=\"presentation\"><g fill-rule=\"evenodd\"><rect fill=\"currentColor\" x=\"6\" y=\"6\" width=\"12\" height=\"12\" rx=\"2\"/><path d=\"M9.707 11.293a1 1 0 1 0-1.414 1.414l2 2a1 1 0 0 0 1.414 0l4-4a1 1 0 1 0-1.414-1.414L11 12.586l-1.293-1.293z\" fill=\"inherit\"/></g></svg>'},e))};s.displayName=\"CheckboxIcon\";var l=s;t.default=l},663:function(e){e.exports=JSON.parse('{\"a\":\"@atlaskit/checkbox\",\"b\":\"9.0.9\"}')},674:function(e,t,n){\"use strict\";n.r(t);var a=n(0),o=n.n(a),r=n(617),i=n(610),s=n(620),l=n(2),c=n(542),u=n(628),p=n(622),d=n(66),h=n(9),m=n(219);n(18),n(69);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var b=function(e,t){return\"function\"==typeof t?t(e):function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t)},g=Object(m.a)((function(e){return Object(m.a)((function(t){return b(e,t)}))})),y=function(e){return Object(a.createElement)(h.a.Consumer,null,(function(t){return e.theme!==t&&(t=g(t)(e.theme)),Object(a.createElement)(h.a.Provider,{value:t},e.children)}))};var k,v,O,j,x,w,E,C,_,S,D,P,T=n(662),I=n.n(T),A=n(660),N=n.n(A),M=n(21),z=n(6),R=n(1),B=n(244),F=o.a.forwardRef((function(e,t){e.createAnalyticsEvent;var n=Object(l.__rest)(e,[\"createAnalyticsEvent\"]);return Object(h.c)(\"input\",Object(l.__assign)({ref:t,css:Object(h.b)(k||(k=Object(l.__makeTemplateObject)([\"\\n      left: 50%;\\n      margin: 0;\\n      opacity: 0;\\n      padding: 0;\\n      position: absolute;\\n      transform: translate(-50%, -50%);\\n      top: 50%;\\n    \"],[\"\\n      left: 50%;\\n      margin: 0;\\n      opacity: 0;\\n      padding: 0;\\n      position: absolute;\\n      transform: translate(-50%, -50%);\\n      top: 50%;\\n    \"])))},n))})),G=Object(M.a)({light:R.N80,dark:R.N80}),K=function(e){var t=e.isDisabled,n=Object(l.__rest)(e,[\"isDisabled\"]);return Object(h.c)(\"label\",Object(l.__assign)({css:Object(h.b)(O||(O=Object(l.__makeTemplateObject)([\"\\n      align-items: flex-start;\\n      display: flex;\\n      color: \",\";\\n      \",\";\\n    \"],[\"\\n      align-items: flex-start;\\n      display: flex;\\n      color: \",\";\\n      \",\";\\n    \"])),t?G(n):R.text(n),t?Object(h.b)(v||(v=Object(l.__makeTemplateObject)([\"\\n            cursor: not-allowed;\\n          \"],[\"\\n            cursor: not-allowed;\\n          \"]))):\"\")},n))},L=Object(M.a)({light:R.N40,dark:R.DN80}),H=Object(h.b)(j||(j=Object(l.__makeTemplateObject)([\"\\n  stroke: currentColor;\\n  stroke-width: 2px;\\n\"],[\"\\n  stroke: currentColor;\\n  stroke-width: 2px;\\n\"]))),U=Object(h.b)(x||(x=Object(l.__makeTemplateObject)([\"\\n  stroke: currentColor;\\n  stroke-width: 2px;\\n\"],[\"\\n  stroke: currentColor;\\n  stroke-width: 2px;\\n\"]))),q=function(e){return e.isDisabled?\"\":e.isActive?H:e.isChecked?U:e.isFocused?function(e){return Object(h.b)(w||(w=Object(l.__makeTemplateObject)([\"\\n  stroke: \",\";\\n  stroke-width: 2px;\\n\"],[\"\\n  stroke: \",\";\\n  stroke-width: 2px;\\n\"])),Object(M.a)({light:R.B100,dark:R.B75})(e))}(e):e.isInvalid?function(e){return Object(h.b)(E||(E=Object(l.__makeTemplateObject)([\"\\n  stroke: \",\";\\n  stroke-width: 2px;\\n\"],[\"\\n  stroke: \",\";\\n  stroke-width: 2px;\\n\"])),Object(M.a)({light:R.R300,dark:R.R300})(e))}(e):(n=(t=e).isHovered,a=Object(l.__rest)(t,[\"isHovered\"]),Object(h.b)(C||(C=Object(l.__makeTemplateObject)([\"\\n  stroke: \",\";\\n  stroke-width: 2px;\\n\"],[\"\\n  stroke: \",\";\\n  stroke-width: 2px;\\n\"])),n?Object(M.a)({light:R.N40,dark:R.DN200})(a):L(a)));var t,n,a},J=function(e){var t=e.isChecked,n=e.isDisabled,a=e.isActive,o=Object(l.__rest)(e,[\"isChecked\",\"isDisabled\",\"isActive\"]),r=Object(M.a)({light:R.N10,dark:R.DN10});return n&&t?r=Object(M.a)({light:R.N70,dark:R.DN90}):a&&t&&!n?r=Object(M.a)({light:R.B400,dark:R.DN10}):t||(r=Object(M.a)({light:\"transparent\",dark:\"transparent\"})),r(o)},W=function(e){var t=e.isChecked,n=e.isDisabled,a=e.isActive,o=e.isHovered,r=Object(l.__rest)(e,[\"isChecked\",\"isDisabled\",\"isActive\",\"isHovered\"]),i=Object(M.a)({light:R.N10,dark:R.DN10});return n?i=Object(M.a)({light:R.N20,dark:R.DN10}):a?i=Object(M.a)({light:R.B50,dark:R.B200}):o&&t?i=Object(M.a)({light:R.B300,dark:R.B75}):o?i=Object(M.a)({light:R.N30,dark:R.DN30}):t&&(i=Object(M.a)({light:R.B400,dark:R.B400})),i(r)},V=function(e){return Object(h.c)(\"span\",Object(l.__assign)({css:Object(h.b)(_||(_=Object(l.__makeTemplateObject)([\"\\n      padding: 2px 4px;\\n    \"],[\"\\n      padding: 2px 4px;\\n    \"])))},e))},$=function(e){return Object(h.c)(\"span\",Object(l.__assign)({css:Object(h.b)(S||(S=Object(l.__makeTemplateObject)([\"\\n      display: flex;\\n      flex-shrink: 0;\\n      position: relative;\\n    \"],[\"\\n      display: flex;\\n      flex-shrink: 0;\\n      position: relative;\\n    \"])))},e))},Y=function(e){var t=e.children,n=Object(l.__rest)(e,[\"children\"]);return Object(h.c)(\"span\",{css:Object(h.b)(D||(D=Object(l.__makeTemplateObject)([\"\\n      line-height: 0;\\n      flex-shrink: 0;\\n      color: \",\";\\n      fill: \",\";\\n      transition: all 0.2s ease-in-out;\\n\\n      /* This is adding a property to the inner svg, to add a border to the checkbox */\\n      & rect:first-of-type {\\n        transition: stroke 0.2s ease-in-out;\\n        \",\";\\n      }\\n\\n      /**\\n      * Need to set the Icon component wrapper to flex to avoid a scrollbar bug which\\n      * happens when checkboxes are flex items in a parent with overflow.\\n      * See AK-6321 for more details.\\n      **/\\n      > span {\\n        display: flex;\\n      }\\n    \"],[\"\\n      line-height: 0;\\n      flex-shrink: 0;\\n      color: \",\";\\n      fill: \",\";\\n      transition: all 0.2s ease-in-out;\\n\\n      /* This is adding a property to the inner svg, to add a border to the checkbox */\\n      & rect:first-of-type {\\n        transition: stroke 0.2s ease-in-out;\\n        \",\";\\n      }\\n\\n      /**\\n      * Need to set the Icon component wrapper to flex to avoid a scrollbar bug which\\n      * happens when checkboxes are flex items in a parent with overflow.\\n      * See AK-6321 for more details.\\n      **/\\n      > span {\\n        display: flex;\\n      }\\n    \"])),W(n),J(n),q(n)),children:t})},Q=function(e){return Object(h.c)(\"span\",Object(l.__assign)({css:Object(h.b)(P||(P=Object(l.__makeTemplateObject)([\"\\n      color: \",\";\\n      padding-left: \",\"px;\\n    \"],[\"\\n      color: \",\";\\n      padding-left: \",\"px;\\n    \"])),R.R400,Object(B.multiply)(z.g,.25))},e))},X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.isChecked,n=e.isDisabled,a=e.isInvalid,r=e.isActive,i=e.isFocused,s=e.isHovered,l=e.isIndeterminate,c=e.primaryColor,u=e.secondaryColor;return o.a.createElement(Y,{isChecked:t,isDisabled:n,isFocused:i,isActive:r,isHovered:s,isInvalid:a},l?o.a.createElement(N.a,{primaryColor:c,secondaryColor:u,label:\"\"}):o.a.createElement(I.a,{primaryColor:c,secondaryColor:u,label:\"\"}))},t.defaultProps={primaryColor:\"inherit\",secondaryColor:\"inherit\",isIndeterminate:!1},t}(a.Component),Z=n(663),ee={},te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isActive:!1,isFocused:!1,isHovered:!1,isMouseDown:!1,isChecked:void 0!==t.props.isChecked?t.props.isChecked:t.props.defaultChecked},t.checkbox=void 0,t.actionKeys=[\" \"],t.onChange=function(e){return t.props.isDisabled?null:(e.persist(),void 0!==e.target.checked&&t.setState({isChecked:e.target.checked}),t.props.onChange&&t.props.onChange(e),!0)},t.blur=function(){t.checkbox&&t.checkbox.blur&&t.checkbox.blur()},t.focus=function(){t.checkbox&&t.checkbox.focus&&t.checkbox.focus()},t.onBlur=function(){return t.setState({isActive:t.state.isMouseDown&&t.state.isActive,isFocused:!1})},t.onFocus=function(){return t.setState({isFocused:!0})},t.onMouseLeave=function(){return t.setState({isActive:!1,isHovered:!1})},t.onMouseEnter=function(){return t.setState({isHovered:!0})},t.onMouseUp=function(){return t.setState({isActive:!1,isMouseDown:!1})},t.onMouseDown=function(){return t.setState({isActive:!0,isMouseDown:!0})},t.onKeyDown=function(e){e.key in t.actionKeys&&t.setState({isActive:!0})},t.onKeyUp=function(e){e.key in t.actionKeys&&t.setState({isActive:!1})},t}return Object(l.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.props.isIndeterminate;this.checkbox&&(this.checkbox.indeterminate=!!e,this.props.inputRef&&this.props.inputRef(this.checkbox))},t.prototype.componentDidUpdate=function(e){var t=this.props.isIndeterminate;e.isIndeterminate!==t&&this.checkbox&&(this.checkbox.indeterminate=!!t)},t.prototype.render=function(){var e=this,t=this.props,n=t.isDisabled,a=t.isInvalid,r=t.isIndeterminate,i=t.label,s=t.name,c=t.value,u=t.isRequired,p=(t.defaultChecked,t.inputRef,t.isChecked),d=(t.isFullWidth,t.onChange,Object(l.__rest)(t,[\"isDisabled\",\"isInvalid\",\"isIndeterminate\",\"label\",\"name\",\"value\",\"isRequired\",\"defaultChecked\",\"inputRef\",\"isChecked\",\"isFullWidth\",\"onChange\"])),h=void 0===this.props.isChecked?this.state.isChecked:p,m=this.state,f=m.isFocused,b=m.isActive,g=m.isHovered;return o.a.createElement(y,{theme:ee},o.a.createElement(K,{isDisabled:n,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseUp:this.onMouseUp},o.a.createElement($,null,o.a.createElement(F,Object(l.__assign)({disabled:n,checked:h,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown,type:\"checkbox\",value:c,name:s,ref:function(t){return e.checkbox=t},required:u},d)),o.a.createElement(X,{isChecked:h,isDisabled:n,isFocused:f,isActive:b,isHovered:g,isInvalid:a,isIndeterminate:r,primaryColor:\"inherit\",secondaryColor:\"inherit\",label:\"\"})),o.a.createElement(V,null,i,u&&o.a.createElement(Q,{\"aria-hidden\":\"true\"},\"*\"))))},t.defaultProps={isDisabled:!1,isInvalid:!1,defaultChecked:!1,isIndeterminate:!1},t}(a.Component),ne=Object(c.a)(\"atlaskit\"),ae=Object(u.a)({componentName:\"checkbox\",packageName:Z.a,packageVersion:Z.b})(Object(p.a)({onChange:ne({action:\"changed\",actionSubject:\"checkbox\",attributes:{componentName:\"checkbox\",packageName:Z.a,packageVersion:Z.b}})})(te)),oe=n(56);const re=(e,t,n)=>{let a=[];return null!==e&&(console.log(\"values\",e),e.map(e=>{console.log(\"item\",e.name),a.push({cells:[{key:e.name,content:e.name,isSortable:!0},{key:e.name+e.status,content:o.a.createElement(\"div\",{style:{marginLeft:\"45px\"}},o.a.createElement(ae,{value:\"1\",name:\"checkbox-basic\",isDisabled:n,defaultChecked:e.status,onChange:n=>{t(n.currentTarget.checked,e)}})),isSortable:!0}],key:e.name+e.status})})),a},ie={head:{cells:[{key:\"head key1\",content:o.a.createElement(\"h5\",{style:{color:Object(oe.a)(\"color.text\")}},\"Group\"),width:84,shouldTruncate:!0},{key:\"head key2\",content:o.a.createElement(\"h5\",{style:{color:Object(oe.a)(\"color.text\")}},\"Insights \"),colSpan:20,shouldTruncate:!0}]}},se={head:{cells:[{key:\"head key1\",width:42,content:o.a.createElement(\"h5\",{style:{color:Object(oe.a)(\"color.text\")}},\"Name\")},{key:\"head key2\",content:o.a.createElement(\"h5\",{style:{color:Object(oe.a)(\"color.text\")}},\"Key\"),width:42},{key:\"head key2\",content:o.a.createElement(\"h5\",{style:{color:Object(oe.a)(\"color.text\")}},\"Operations\")}]}};var le=n(218),ce=n(658),ue=n.n(ce),pe=n(136),de=n.n(pe),he=n(196),me=n.n(he),fe=n(292),be=n(651);const ge=e=>{const[t,n]=Object(a.useState)(0),[r,i]=Object(a.useState)(1);return Object(a.useEffect)(()=>{n(re(e.data,e.onChangecheck,e.ButtonState)),console.log(\"actual syn\",t),console.log(\"calling before transform\")},[e.data,e.onChangecheck,e.ButtonState]),o.a.createElement(fe.a,{head:e.head,rows:t,rowsPerPage:5,isLoading:e.loading,onSetPage:t=>{n(re(e.data,e.onChangecheck,e.ButtonState)),i(t)},page:r,emptyView:o.a.createElement(\"h6\",{style:{color:Object(oe.a)(\"color.text\")}},\"No matching records found\")})},ye=e=>{let t=((e,t,n)=>{let a=e=>{if(window.location.search&&new RegExp(e+\"=([^&]*)\").exec(window.location.search)){var t=new RegExp(e+\"=([^&]*)\").exec(window.location.search)[1];return decodeURIComponent(t)}return\"\"},r=a(\"xdm_e\")+a(\"cp\"),i=[];return null!==e&&(console.log(\"values\",e),e.map(e=>{console.log(e),i.push({cells:[{key:e.key,content:e.name,isSortable:!0},{key:e.key,content:e.key,isSortable:!0},{key:e.key,content:o.a.createElement(\"a\",{target:\"_blank\",rel:\"noopener noreferrer\",href:r+\"/plugins/atlassian-connect/space-tools-tab.action?key=\"+e.key+\"&addonKey=com.view26.pageview-insights.spaces.confluence&moduleKey=view26-insights-permission\"},\" \",\"Manage Permissions\"),isSortable:!0}],key:e.key})})),i})(e.data);return o.a.createElement(be.a,{head:e.head,rows:t,rowsPerPage:5,isLoading:e.loading,emptyView:o.a.createElement(\"h6\",{style:{color:Object(oe.a)(\"color.text\")}},\"No matching records found\")})};var ke=n(102);t.default=()=>{const[e,t]=Object(a.useState)(null),[n,l]=Object(a.useState)(!0),[c,u]=Object(a.useState)(!1),[p,d]=Object(a.useState)(\"None\"),[h,m]=Object(a.useState)(),[f,b]=Object(a.useState)(null),[g,y]=Object(a.useState)(null),[k,v]=Object(a.useState)(!0),[O,j]=Object(a.useState)(!0);let x=0,w=0,E=0,C=0,_=(e,t)=>{let n=[],a=[],o=[];return t.permissions.map(e=>{a.push(e.name)}),e.results.map(e=>{n.push(e.name)}),n.forEach(e=>{a.includes(e)?o.push({name:e,status:!0}):o.push({name:e,status:!1})}),console.log(\"state array\",o),o};const S=e=>(console.log(\"refunction\",e),new Promise((function(t,n){window.AP.request(\"/rest/api/group?start=\"+e,{contentType:\"application/json; charset=utf-8\",type:\"GET\",success:function(e){let n=JSON.parse(e),a=n.limit;x+=n.size,console.log(\"limit refunction\",w,x,a),t(w<=x?n.results.slice():S(a))},error:function(e){n(JSON.parse(e))}})})));Object(a.useEffect)(()=>{window.AP.request(\"/rest/api/group?start=0\",{contentType:\"application/json; charset=utf-8\",type:\"GET\",success:async function(n){let a=JSON.parse(n);w=a.size;let o=a.limit;x+=o;let r=a.results.slice();if(w>x){(await S(o)).forEach(e=>{r.push(e)})}console.log(\"final result\",r),a.results.splice(0,a.results.length),r.forEach((function(e,t){a.results.push({key:e.name,name:e.name,type:e.type,profilePicURL:\"/app/favicon.png\"})})),console.log(\"response result\",a.results);let i=document.getElementById(\"jwt\");if(console.log(\"meta\",i),i){let n=i.content;console.log(\"Jwt token from index.html\",n),me.a.get(\"/permissions\",{headers:{Authorization:n}}).then(n=>{y(n.headers.authorization);let o=_(a,n.data);m(n.data.spaceOverGlobal),console.log(\"permissions data\",o),t(o),v(!1),console.info(\"table state\",e)}).catch(e=>{console.info(\"Permission data failed\",e.response)})}else window.AP.context.getToken(n=>{me.a.post(\"/authorize?jwt=\"+n+\"&spaceKey=&lic=active\").then(n=>{me.a.get(\"/permissions\",{headers:{Authorization:n.headers.authorization}}).then(n=>{y(n.headers.authorization);let o=_(a,n.data);m(n.data.spaceOverGlobal),console.log(\"permissions data\",o),t(o),v(!1),console.info(\"table state\",e)}).catch(e=>{console.info(\"Permission data failed\",e.response)})})})}}),window.AP.request(\"/rest/api/space?start=0\",{contentType:\"application/json; charset=utf-8\",type:\"GET\",success:async function(e){let t=JSON.parse(e);C=t.size;let n=t.limit;E+=n;let a=t.results.slice();if(t.results.splice(0,t.results.length),C>E){(await(e=>(console.log(\"refunction\",e),new Promise((function(t,n){window.AP.request(\"/rest/api/space?start=\"+e,{contentType:\"application/json; charset=utf-8\",type:\"GET\",success:function(e){let n=JSON.parse(e),a=n.limit;E+=n.size,console.log(\"limit refunction\",C,E,a),t(C<=E?n.results.slice():S(a))},error:function(e){n(JSON.parse(e))}})}))))(n)).forEach(e=>{a.push(e)})}console.log(\"actual results\",a),a.forEach((function(e,n){t.results.push({key:e.key,name:e.name,type:e._links.self,profilePicURL:\"/app/favicon.png\"})})),console.log(\"results of space\",t),b(t.results),j(!1)}})},[]);let D=t=>{if(t===h){let n=[];e.map(e=>{e.status&&(console.log(\"element with true\",e),n.push({key:e.name,name:e.name,type:\"group\",profilePicURL:\"/app/favicon.png\"}))});let a={permissions:n,spaceOverGlobal:!t};console.log(\"spacepermsiion payload\",a),me.a.post(\"/permissions\",a,{headers:{Authorization:g}}).then(e=>{console.info(\"Space dropdown changed\"),y(e.headers.authorization)}).catch(e=>{console.info(\"Space dropdown changed Failed \",e.response),console.info(\"Request payload \",a)}),m(!t)}};return o.a.createElement(ke.e,null,o.a.createElement(\"div\",{style:{padding:25},className:\"ac-content\"},o.a.createElement(\"h3\",null,\"Global Permissions\"),o.a.createElement(\"div\",{style:{paddingTop:\"10px\",display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"}},o.a.createElement(\"p\",null,\"Grant access to Insights for all the members of a group.\"),o.a.createElement(\"div\",null,o.a.createElement(le.a,{onClick:()=>{if(n)l(!1);else{l(!0);let t=[];console.log(\"Table state inside button click\",e),e.map(e=>{e.status&&(console.log(\"element wit true\",e),t.push({key:e.name,name:e.name,type:\"group\",profilePicURL:\"/app/favicon.png\"}))}),console.log(\"permission change request payload\",t),me.a.post(\"/permissions\",{permissions:t,spaceOverGlobal:h},{headers:{Authorization:g}}).then(e=>{console.info(\"Permissions changed\"),y(e.headers.authorization)}).catch(e=>{console.info(\"Permission change error \",e.response),console.info(\"Request payload \",t)})}},appearance:n?\"default\":\"primary\"},n?\"Edit Settings\":\"Save Settings\"))),o.a.createElement(\"div\",{style:{marginTop:\"5px\"}},o.a.createElement(ge,{head:ie.head,data:e,onChangecheck:(n,a)=>{let o=e;if(n)n&&(r=o.findIndex(e=>e.name===a.name),o[r]={name:a.name,status:!0},t(o));else{var r=o.findIndex(e=>e.name===a.name);o[r]={name:a.name,status:!1},t(o)}},ButtonState:n,loading:k}),o.a.createElement(\"h3\",null,\"Space Permissions\"),o.a.createElement(\"div\",{style:{marginTop:\"30px\",alignSelf:\"center\"}},o.a.createElement(r.a,{trigger:o.a.createElement(\"div\",null,h?o.a.createElement(a.Fragment,null,o.a.createElement(de.a,{primaryColor:\"red\",size:\"small\"}),\" If specified, space permission overrides global permission scheme\"):o.a.createElement(a.Fragment,null,o.a.createElement(ue.a,{primaryColor:\"green\",size:\"small\"}),\" \",\"Allow global permission scheme to be applied to all Spaces\")),boundariesElement:\"window\",shouldFitContainer:\"false\",triggerType:\"button\"},o.a.createElement(i.a,{id:\"asda\",title:\"Options\"},o.a.createElement(s.a,{elemBefore:o.a.createElement(ue.a,{primaryColor:\"green\",size:\"small\"}),style:{color:Object(oe.a)(\"color.text\")},onClick:()=>D(!0)},\"Allow global permission scheme to be applied to all Spaces\"),o.a.createElement(s.a,{elemBefore:o.a.createElement(de.a,{primaryColor:\"red\",size:\"small\"}),onClick:()=>D(!1),style:{color:Object(oe.a)(\"color.text\")}},\"If specified, space permission overrides global permission scheme\")))),o.a.createElement(\"div\",{style:{paddingTop:\"10px\",marginTop:\"30px\",color:Object(oe.a)(\"color.text\")}},\"Further restrict who can use\",o.a.createElement(\"span\",{style:{fontWeight:\"bold\"}},\" Insights \"),\" at a space level.\"),o.a.createElement(\"div\",{style:{marginTop:\"5px\"}},o.a.createElement(ye,{head:se.head,data:f,loading:O})),o.a.createElement(\"div\",null,o.a.createElement(\"h3\",null,\"REST API Token\"),o.a.createElement(\"div\",{style:{paddingTop:\"10px\"}},\"Your API key can be used to authenticate you when using the REST API. To use the API key refer to\",\" \",o.a.createElement(\"a\",{target:\"_blank\",rel:\"noopener noreferrer\",href:\"https://docs-view26.atlassian.net/wiki/spaces/PVIFC/pages/474972171/REST+API\"},\" \",\"REST API documentation.\")),o.a.createElement(\"div\",{style:{paddingTop:\"10px\",display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"}},o.a.createElement(\"div\",{style:{paddingRight:\"50px\"}},c?o.a.createElement(\"div\",null,\" Token ID: \",p):o.a.createElement(\"div\",null,\" Token ID: \",p,\" \")),o.a.createElement(\"div\",{style:{alignContent:\"flex-end\"}},o.a.createElement(le.a,{onClick:()=>{c?(u(!1),d(\"None\")):(u(!0),me.a.post(\"/account/token\",{},{headers:{Authorization:g}}).then(e=>{y(e.headers.authorization),console.info(\"Token data\",e.data),d(e.data.token),u(!0)}).catch(e=>{console.info(\"Token failed\",e.response)}))}},c?o.a.createElement(\"div\",null,\"Revoke \"):o.a.createElement(\"div\",null,\"Generate \"))))))))}}}]);","extractedComments":[]}